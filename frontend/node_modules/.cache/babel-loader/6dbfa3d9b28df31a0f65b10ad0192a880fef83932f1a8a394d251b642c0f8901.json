{"ast":null,"code":"import{API_BASE_URL}from'../config';import React,{useState}from'react';import'./Sidebar.css';import{getCookie}from'../utils/cookies';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Sidebar(_ref){let{sessions,activeSession,onSelectSession,onCreateSession,onDeleteSession}=_ref;const[showDropdown,setShowDropdown]=useState(null);const handleDelete=async(sessionId,e)=>{e.stopPropagation();const confirmDelete=window.confirm(\"Are you sure you want to delete this chat?\");if(!confirmDelete)return;try{const res=await fetch(`${API_BASE_URL}/geminiapi/sessions/${sessionId}/delete`,{method:\"DELETE\",credentials:\"include\",headers:{\"X-CSRFToken\":getCookie(\"csrftoken\")}});if(res.ok){// Refresh sessions\nonDeleteSession(sessionId);}}catch(err){console.error(\"Failed to delete session:\",err);}};const toggleDropdown=(sessionId,e)=>{e.stopPropagation();setShowDropdown(showDropdown===sessionId?null:sessionId);};return/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"new-chat-button-container\",children:/*#__PURE__*/_jsx(\"button\",{className:\"new-chat-button\",onClick:onCreateSession,children:\"Nuevo Chat\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"sessions-list\",children:sessions.map(session=>/*#__PURE__*/_jsxs(\"div\",{className:`session-item ${activeSession===session.id?'active':''}`,onClick:()=>onSelectSession(session.id),children:[/*#__PURE__*/_jsx(\"div\",{className:\"session-title\",children:session.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"session-menu\",onClick:e=>toggleDropdown(session.id,e),onMouseEnter:e=>e.currentTarget.classList.add('hovered'),onMouseLeave:e=>e.currentTarget.classList.remove('hovered'),children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u22EF\"}),showDropdown===session.id&&/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-menu\",onClick:e=>e.stopPropagation(),children:/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-item delete-item\",onClick:e=>handleDelete(session.id,e),children:\"Delete\"})})]})]},session.id))})]});}export default Sidebar;","map":{"version":3,"names":["API_BASE_URL","React","useState","getCookie","jsx","_jsx","jsxs","_jsxs","Sidebar","_ref","sessions","activeSession","onSelectSession","onCreateSession","onDeleteSession","showDropdown","setShowDropdown","handleDelete","sessionId","e","stopPropagation","confirmDelete","window","confirm","res","fetch","method","credentials","headers","ok","err","console","error","toggleDropdown","className","children","onClick","map","session","id","title","onMouseEnter","currentTarget","classList","add","onMouseLeave","remove"],"sources":["/home/ubuntu/EmberLight_Projecte2/frontend/src/components/Sidebar.js"],"sourcesContent":["import { API_BASE_URL } from '../config';\nimport React, { useState } from 'react';\nimport './Sidebar.css';\nimport { getCookie } from '../utils/cookies';\n\nfunction Sidebar({ sessions, activeSession, onSelectSession, onCreateSession, onDeleteSession }) {\n  const [showDropdown, setShowDropdown] = useState(null);\n\n  const handleDelete = async (sessionId, e) => {\n    e.stopPropagation();\n    const confirmDelete = window.confirm(\"Are you sure you want to delete this chat?\");\n    if (!confirmDelete) return;\n\n    try {\n      const res = await fetch(`${API_BASE_URL}/geminiapi/sessions/${sessionId}/delete`, {\n        method: \"DELETE\",\n        credentials: \"include\",\n        headers: {\n          \"X-CSRFToken\": getCookie(\"csrftoken\"),\n        },\n      });\n      \n      if (res.ok) {\n        // Refresh sessions\n        onDeleteSession(sessionId);\n      }\n    } catch (err) {\n      console.error(\"Failed to delete session:\", err);\n    }\n  };\n\n  const toggleDropdown = (sessionId, e) => {\n    e.stopPropagation();\n    setShowDropdown(showDropdown === sessionId ? null : sessionId);\n  };\n\n  return (\n    <div className=\"sidebar\">\n      <div className=\"new-chat-button-container\">\n        <button className=\"new-chat-button\" onClick={onCreateSession}>\n          Nuevo Chat\n        </button>\n      </div>\n      <div className=\"sessions-list\">\n        {sessions.map(session => (\n          <div\n            key={session.id}\n            className={`session-item ${activeSession === session.id ? 'active' : ''}`}\n            onClick={() => onSelectSession(session.id)}\n          >\n            <div className=\"session-title\">{session.title}</div>\n            <div \n              className=\"session-menu\" \n              onClick={(e) => toggleDropdown(session.id, e)}\n              onMouseEnter={(e) => e.currentTarget.classList.add('hovered')}\n              onMouseLeave={(e) => e.currentTarget.classList.remove('hovered')}\n            >\n              <span>â‹¯</span>\n              {showDropdown === session.id && (\n                <div className=\"dropdown-menu\" onClick={(e) => e.stopPropagation()}>\n                  <div \n                    className=\"dropdown-item delete-item\" \n                    onClick={(e) => handleDelete(session.id, e)}\n                  >\n                    Delete\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport default Sidebar;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}